<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Filtermore by CrazyJson</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Filtermore</h1>
        <p>互联网风格筛选插件</p>

        <p class="view"><a href="https://github.com/CrazyJson/filterMore">View the Project on GitHub <small>CrazyJson/filterMore</small></a></p>


        <ul>
          <li><a href="https://github.com/CrazyJson/filterMore/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/CrazyJson/filterMore/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/CrazyJson/filterMore">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a id="filtermore-10" class="anchor" href="#filtermore-10" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>filterMore-1.0</h1>

<p>互联网风格前端筛选插件</p>

<h2>
<a id="目录" class="anchor" href="#%E7%9B%AE%E5%BD%95" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>目录</h2>

<ul>
<li>  <a href="#%E7%89%B9%E6%80%A7">特性</a>
</li>
<li>  <a href="#%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B">快速上手</a>
</li>
<li>  <a href="#%E5%8F%82%E6%95%B0%E4%BB%8B%E7%BB%8D">参数介绍</a>
</li>
<li>  <a href="#%E4%B8%8B%E8%BD%BD">下载</a>
</li>
<li>  <a href="#%E6%96%B9%E6%B3%95">方法</a>
</li>
<li>  <a href="#%E6%9B%B4%E6%96%B0%E6%97%A5%E5%BF%97">更新日志</a>
</li>
<li>  <a href="#%E6%8E%88%E6%9D%83%E5%8D%8F%E8%AE%AE">授权协议</a>
</li>
</ul>

<h2>
<a id="特性" class="anchor" href="#%E7%89%B9%E6%80%A7" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>特性</h2>

<ol>
<li> 性能卓越，执行速度通常是 Mustache 与 tmpl 的 20 多倍（<a href="http://aui.github.com/artTemplate/test/test-speed.html">性能测试</a>）</li>
<li> 支持运行时调试，可精确定位异常模板所在语句（<a href="http://aui.github.io/artTemplate/demo/debug.html">演示</a>）</li>
<li> 对 NodeJS Express 友好支持</li>
<li> 安全，默认对输出进行转义、在沙箱中运行编译后的代码（Node版本可以安全执行用户上传的模板）</li>
<li> 支持<code>include</code>语句</li>
<li> 可在浏览器端实现按路径加载模板（<a href="#%E4%BD%BF%E7%94%A8%E9%A2%84%E7%BC%96%E8%AF%91">详情</a>）</li>
<li> 支持预编译，可将模板转换成为非常精简的 js 文件</li>
<li> 模板语句简洁，无需前缀引用数据，有简洁版本与原生语法版本可选</li>
<li> 支持所有流行的浏览器</li>
</ol>

<h2>
<a id="快速上手" class="anchor" href="#%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>快速上手</h2>

<h3>
<a id="编写模板" class="anchor" href="#%E7%BC%96%E5%86%99%E6%A8%A1%E6%9D%BF" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>编写模板</h3>

<p>使用一个<code>type="text/html"</code>的<code>script</code>标签存放模板：</p>

<pre><code>&lt;script id="test" type="text/html"&gt;
&lt;h1&gt;{{title}}&lt;/h1&gt;
&lt;ul&gt;
    {{each list as value i}}
        &lt;li&gt;索引 {{i + 1}} ：{{value}}&lt;/li&gt;
    {{/each}}
&lt;/ul&gt;
&lt;/script&gt;
</code></pre>

<h3>
<a id="渲染模板" class="anchor" href="#%E6%B8%B2%E6%9F%93%E6%A8%A1%E6%9D%BF" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>渲染模板</h3>

<pre><code>var data = {
    title: '标签',
    list: ['文艺', '博客', '摄影', '电影', '民谣', '旅行', '吉他']
};
var html = template('test', data);
document.getElementById('content').innerHTML = html;
</code></pre>

<p><a href="http://aui.github.com/artTemplate/demo/basic.html">演示</a></p>

<h2>
<a id="模板语法" class="anchor" href="#%E6%A8%A1%E6%9D%BF%E8%AF%AD%E6%B3%95" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>模板语法</h2>

<p>有两个版本的模板语法可以选择。</p>

<h3>
<a id="简洁语法" class="anchor" href="#%E7%AE%80%E6%B4%81%E8%AF%AD%E6%B3%95" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>简洁语法</h3>

<p>推荐使用，语法简单实用，利于读写。</p>

<pre><code>{{if admin}}
    {{include 'admin_content'}}

    {{each list}}
        &lt;div&gt;{{$index}}. {{$value.user}}&lt;/div&gt;
    {{/each}}
{{/if}}
</code></pre>

<p><a href="https://github.com/aui/artTemplate/wiki/syntax:simple">查看语法与演示</a></p>

<h3>
<a id="原生语法" class="anchor" href="#%E5%8E%9F%E7%94%9F%E8%AF%AD%E6%B3%95" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>原生语法</h3>

<pre><code>&lt;%if (admin){%&gt;
    &lt;%include('admin_content')%&gt;

    &lt;%for (var i=0;i&lt;list.length;i++) {%&gt;
        &lt;div&gt;&lt;%=i%&gt;. &lt;%=list[i].user%&gt;&lt;/div&gt;
    &lt;%}%&gt;
&lt;%}%&gt;
</code></pre>

<p><a href="https://github.com/aui/artTemplate/wiki/syntax:native">查看语法与演示</a></p>

<h2>
<a id="下载" class="anchor" href="#%E4%B8%8B%E8%BD%BD" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>下载</h2>

<ul>
<li>
<a href="https://raw.githubusercontent.com/CrazyJson/filterMore/master/dist/filterMore.min.js">filterMore.min.js</a> <em>(压缩后js文件, 7.9kb)</em>
</li>
<li>
<a href="https://raw.githubusercontent.com/CrazyJson/filterMore/master/dist/css/fiterMore.min.css">fiterMore.min.css</a> <em>(压缩后css文件, 2.1kb)</em>
</li>
</ul>

<h2>
<a id="方法" class="anchor" href="#%E6%96%B9%E6%B3%95" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>方法</h2>

<h3>
<a id="templateid-data" class="anchor" href="#templateid-data" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>template(id, data)</h3>

<p>根据 id 渲染模板。内部会根据<code>document.getElementById(id)</code>查找模板。</p>

<p>如果没有 data 参数，那么将返回一渲染函数。</p>

<h3>
<a id="templatecompilesource-options" class="anchor" href="#templatecompilesource-options" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>template.<code>compile</code>(source, options)</h3>

<p>将返回一个渲染函数。<a href="http://aui.github.com/artTemplate/demo/compile.html">演示</a></p>

<h3>
<a id="templaterendersource-options" class="anchor" href="#templaterendersource-options" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>template.<code>render</code>(source, options)</h3>

<p>将返回渲染结果。</p>

<h3>
<a id="templatehelpername-callback" class="anchor" href="#templatehelpername-callback" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>template.<code>helper</code>(name, callback)</h3>

<p>添加辅助方法。</p>

<p>例如时间格式器：<a href="http://aui.github.com/artTemplate/demo/helper.html">演示</a></p>

<h3>
<a id="templateconfigname-value" class="anchor" href="#templateconfigname-value" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>template.<code>config</code>(name, value)</h3>

<p>更改引擎的默认配置。</p>

<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>默认值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>openTag</td>
<td>String</td>
<td><code>'{{'</code></td>
<td>逻辑语法开始标签</td>
</tr>
<tr>
<td>closeTag</td>
<td>String</td>
<td><code>"}}"</code></td>
<td>逻辑语法结束标签</td>
</tr>
<tr>
<td>escape</td>
<td>Boolean</td>
<td><code>true</code></td>
<td>是否编码输出 HTML 字符</td>
</tr>
<tr>
<td>cache</td>
<td>Boolean</td>
<td><code>true</code></td>
<td>是否开启缓存（依赖 options 的 filename 字段）</td>
</tr>
<tr>
<td>compress</td>
<td>Boolean</td>
<td><code>false</code></td>
<td>是否压缩 HTML 多余空白字符</td>
</tr>
</tbody>
</table>

<h2>
<a id="使用预编译" class="anchor" href="#%E4%BD%BF%E7%94%A8%E9%A2%84%E7%BC%96%E8%AF%91" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>使用预编译</h2>

<p>可突破浏览器限制，让前端模板拥有后端模板一样的同步“文件”加载能力：</p>

<p>一、<strong>按文件与目录组织模板</strong></p>

<pre><code>template('tpl/home/main', data)
</code></pre>

<p>二、<strong>模板支持引入子模板</strong></p>

<pre><code>{{include '../public/header'}}
</code></pre>

<h3>
<a id="基于预编译" class="anchor" href="#%E5%9F%BA%E4%BA%8E%E9%A2%84%E7%BC%96%E8%AF%91" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>基于预编译：</h3>

<ul>
<li>  可将模板转换成为非常精简的 js 文件（不依赖引擎）</li>
<li>  使用同步模板加载接口</li>
<li>  支持多种 js 模块输出：AMD、CMD、CommonJS</li>
<li>  支持作为 GruntJS 插件构建</li>
<li>  前端模板可共享给 NodeJS 执行</li>
<li>  自动压缩打包模板</li>
</ul>

<p>预编译工具：<a href="http://github.com/aui/tmodjs/">TmodJS</a></p>

<h2>
<a id="nodejs" class="anchor" href="#nodejs" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>NodeJS</h2>

<h3>
<a id="安装" class="anchor" href="#%E5%AE%89%E8%A3%85" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>安装</h3>

<pre><code>npm install art-template
</code></pre>

<h3>
<a id="使用" class="anchor" href="#%E4%BD%BF%E7%94%A8" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>使用</h3>

<pre><code>var template = require('art-template');
var data = {list: ["aui", "test"]};

var html = template(__dirname + '/index/main', data);
</code></pre>

<h3>
<a id="配置" class="anchor" href="#%E9%85%8D%E7%BD%AE" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>配置</h3>

<p>NodeJS 版本新增了如下默认配置：</p>

<table>
<thead>
<tr>
<th>字段</th>
<th>类型</th>
<th>默认值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>base</td>
<td>String</td>
<td><code>''</code></td>
<td>指定模板目录</td>
</tr>
<tr>
<td>extname</td>
<td>String</td>
<td><code>'.html'</code></td>
<td>指定模板后缀名</td>
</tr>
<tr>
<td>encoding</td>
<td>String</td>
<td><code>'utf-8'</code></td>
<td>指定模板编码</td>
</tr>
</tbody>
</table>

<p>配置<code>base</code>指定模板目录可以缩短模板的路径，并且能够避免<code>include</code>语句越级访问任意路径引发安全隐患，例如：</p>

<pre><code>template.config('base', __dirname);
var html = template('index/main', data)
</code></pre>

<h3>
<a id="nodejs--express" class="anchor" href="#nodejs--express" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>NodeJS + Express</h3>

<pre><code>var template = require('art-template');
template.config('base', '');
template.config('extname', '.html');
app.engine('.html', template.__express);
app.set('view engine', 'html');
//app.set('views', __dirname + '/views');
</code></pre>

<p>运行 demo:</p>

<pre><code>node demo/node-template-express.js
</code></pre>

<blockquote>
<p>若使用 js 原生语法作为模板语法，请改用 <code>require('art-template/node/template-native.js')</code></p>
</blockquote>

<h2>
<a id="升级参考" class="anchor" href="#%E5%8D%87%E7%BA%A7%E5%8F%82%E8%80%83" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>升级参考</h2>

<p>为了适配 NodeJS express，artTemplate v3.0.0 接口有调整。</p>

<h3>
<a id="接口变更" class="anchor" href="#%E6%8E%A5%E5%8F%A3%E5%8F%98%E6%9B%B4" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>接口变更</h3>

<ol>
<li> 默认使用简洁语法</li>
<li>
<code>template.render()</code>方法的第一个参数不再是 id，而是模板字符串</li>
<li>使用新的配置接口<code>template.config()</code>并且字段名有修改</li>
<li>
<code>template.compile()</code>方法不支持 id 参数</li>
<li>helper 方法不再强制原文输出，是否编码取决于模板语句</li>
<li>
<code>template.helpers</code> 中的<code>$string</code>、<code>$escape</code>、<code>$each</code>已迁移到<code>template.utils</code>中</li>
<li>
<code>template()</code>方法不支持传入模板直接编译</li>
</ol>

<h3>
<a id="升级方法" class="anchor" href="#%E5%8D%87%E7%BA%A7%E6%96%B9%E6%B3%95" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>升级方法</h3>

<ol>
<li>如果想继续使用 js 原生语法作为模板语言，请使用 <a href="https://raw.github.com/aui/artTemplate/master/dist/template-native.js">template-native.js</a>
</li>
<li>查找项目<code>template.render</code>替换为<code>template</code>
</li>
<li>使用<code>template.config(name, value)</code>来替换以前的配置</li>
<li>
<code>template()</code>方法直接传入的模板改用<code>template.compile()</code>（v2初期版本）</li>
</ol>

<h2>
<a id="更新日志" class="anchor" href="#%E6%9B%B4%E6%96%B0%E6%97%A5%E5%BF%97" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>更新日志</h2>

<h3>
<a id="v303" class="anchor" href="#v303" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>v3.0.3</h3>

<ol>
<li>解决<code>template.helper()</code>方法传入的数据被转成字符串的问题 #96</li>
<li>解决<code>{{value || value2}}</code>被识别为管道语句的问题 #105 <a href="https://github.com/aui/tmodjs/issues/48">https://github.com/aui/tmodjs/issues/48</a>
</li>
</ol>

<h3>
<a id="v302" class="anchor" href="#v302" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>v3.0.2</h3>

<ol>
<li> <del>解决管道语法必须使用空格分隔的问题</del>
</li>
</ol>

<h3>
<a id="v301" class="anchor" href="#v301" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>v3.0.1</h3>

<ol>
<li> 适配 express3.x 与 4.x，修复路径 BUG</li>
</ol>

<h3>
<a id="v300" class="anchor" href="#v300" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>v3.0.0</h3>

<ol>
<li>提供 NodeJS 专属版本，支持使用路径加载模板，并且模板的<code>include</code>语句也支持相对路径</li>
<li>适配 <a href="http://expressjs.com">express</a> 框架</li>
<li>内置<code>print</code>语句支持传入多个参数</li>
<li>支持全局缓存配置</li>
<li>简洁语法版支持管道风格的 helper 调用，例如：<code>{{time | dateFormat:'yyyy年 MM月 dd日 hh:mm:ss'}}</code>
</li>
</ol>

<p>当前版本接口有调整，请阅读 <a href="#%E5%8D%87%E7%BA%A7%E5%8F%82%E8%80%83">升级参考</a></p>

<blockquote>
<p>artTemplate 预编译工具 <a href="https://github.com/aui/tmodjs">TmodJS</a> 已更新</p>
</blockquote>

<h3>
<a id="v204" class="anchor" href="#v204" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>v2.0.4</h3>

<ol>
<li> 修复低版本安卓浏览器编译后可能产生语法错误的问题（因为此版本浏览器 js 引擎存在 BUG）</li>
</ol>

<h3>
<a id="v203" class="anchor" href="#v203" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>v2.0.3</h3>

<ol>
<li> 优化辅助方法性能</li>
<li> NodeJS 用户可以通过 npm 获取 artTemplate：<code>$ npm install art-template -g</code>
</li>
<li> 不转义输出语句推荐使用<code>&lt;%=#value%&gt;</code>（兼容 v2.0.3 版本之前使用的<code>&lt;%==value%&gt;</code>），而简版语法则可以使用<code>{{#value}}</code>
</li>
<li> 提供简版语法的合并版本 dist/<a href="https://raw.github.com/aui/artTemplate/master/dist/template-simple.js">template-simple.js</a>
</li>
</ol>

<h3>
<a id="v202" class="anchor" href="#v202" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>v2.0.2</h3>

<ol>
<li> 优化自定义语法扩展，减少体积</li>
<li> [重要]为了最大化兼容第三方库，自定义语法扩展默认界定符修改为<code>{{</code>与<code>}}</code>。</li>
<li> 修复合并工具的BUG <a href="https://github.com/aui/artTemplate/issues/25">#25</a>
</li>
<li> 公开了内部缓存，可以通过<code>template.cache</code>访问到编译后的函数</li>
<li> 公开了辅助方法缓存，可以通过<code>template.helpers</code>访问到</li>
<li> 优化了调试信息</li>
</ol>

<h3>
<a id="v201" class="anchor" href="#v201" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>v2.0.1</h3>

<ol>
<li> 修复模板变量静态分析的<a href="https://github.com/aui/artTemplate/pull/22">BUG</a>
</li>
</ol>

<h3>
<a id="v20-release" class="anchor" href="#v20-release" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>v2.0 release</h3>

<ol>
<li> <del>编译工具更名为 atc，成为 artTemplate 的子项目单独维护：<a href="https://github.com/cdc-im/atc">https://github.com/cdc-im/atc</a></del>
</li>
</ol>

<h3>
<a id="v20-beta5" class="anchor" href="#v20-beta5" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>v2.0 beta5</h3>

<ol>
<li>修复编译工具可能存在重复依赖的问题。感谢 <a href="https://github.com/warmhug" class="user-mention">@warmhug</a>
</li>
<li>修复预编译<code>include</code>内部实现可能产生上下文不一致的问题。感谢 <a href="https://github.com/warmhug" class="user-mention">@warmhug</a>
</li>
<li>编译工具支持使用拖拽文件进行单独编译</li>
</ol>

<h3>
<a id="v20-beta4" class="anchor" href="#v20-beta4" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>v2.0 beta4</h3>

<ol>
<li>修复编译工具在压缩模板可能导致 HTML 意外截断的问题。感谢 <a href="https://github.com/warmhug" class="user-mention">@warmhug</a>
</li>
<li>完善编译工具对<code>include</code>支持支持，可以支持不同目录之间模板嵌套</li>
<li>修复编译工具没能正确处理自定义语法插件的辅助方法</li>
</ol>

<h3>
<a id="v20-beta1" class="anchor" href="#v20-beta1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>v2.0 beta1</h3>

<ol>
<li> 对非 String、Number 类型的数据不输出，而 Function 类型求值后输出。</li>
<li> 默认对 html 进行转义输出，原文输出可使用<code>&lt;%==value%&gt;</code>（备注：v2.0.3 推荐使用<code>&lt;%=#value%&gt;</code>），也可以关闭默认的转义功能<code>template.defaults.escape = false</code>。</li>
<li> 增加批处理工具支持把模板编译成不依赖模板引擎的 js 文件，可通过 RequireJS、SeaJS 等模块加载器进行异步加载。</li>
</ol>

<h2>
<a id="授权协议" class="anchor" href="#%E6%8E%88%E6%9D%83%E5%8D%8F%E8%AE%AE" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>授权协议</h2>

<p>Released under the MIT, BSD, and GPL Licenses</p>

<h1></h1>

<p><a href="http://aui.github.com/artTemplate/demo/index.html">所有演示例子</a> | <a href="http://cdc.tencent.com/?p=5723">引擎原理</a></p>

<p>© tencent.com</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/CrazyJson">CrazyJson</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
